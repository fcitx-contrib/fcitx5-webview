/* use Digital Color Meter with sRGB mode to get correct color */
$panel-alpha: 0.8125;

/* light */
$panel-color-light: rgba(240, 240, 240, $panel-alpha);
$panel-border-color-light: rgb(0 0 0 / 17.5%);
$vertical-border-color-light: rgba(224, 224, 224, $panel-alpha);
$text-color-light: rgb(0 0 0 / 70%);
$label-color-light: rgb(128 128 128);

/* dark */
$panel-color-dark: rgba(60, 60, 60, $panel-alpha);
$panel-border-color-dark: rgb(0 0 0 / 47.5%);
$vertical-border-color-dark: rgba(85, 85, 85, $panel-alpha);
$text-color-dark: rgb(255 255 255 / 90%);
$label-color-dark: rgb(124 124 124);

/* accent color */
$light-blue: rgb(0 90 216);
$dark-blue: rgb(0 89 208);
$light-purple: rgb(125 42 126);
$dark-purple: rgb(128 52 130);
$light-pink: rgb(217 59 134);
$dark-pink: rgb(201 51 120);
$light-red: rgb(196 38 43);
$dark-red: rgb(209 53 57);
$light-orange: rgb(217 107 10);
$dark-orange: rgb(200 96 4);
$light-yellow: rgb(214 164 14);
$dark-yellow: rgb(209 158 0);
$light-green: rgb(76 160 50);
$dark-green: rgb(67 146 42);
$light-graphite: rgb(128 128 128);
$dark-graphite: rgb(105 105 105);

.macos {
  .panel, .contextmenu {
    border-width: 1px;
    border-style: solid;
    border-radius: 6px;
    background-clip: padding-box; /* make border alpha and content alpha independent */
    box-shadow: 0 10px 20px rgb(0 0 0 / 14%),
                0 0 25px rgb(0 0 0 / 12%);
  }

  .panel {
    transform: translate(25px, 25px); /* leave top and left for shadow */
  }

  .contextmenu {
    backdrop-filter: blur(16px);
  }

  .cursor.no-text {
    width: 1px;
    height: 16px;
    margin-left: 1px;
    margin-right: 1px;
  }

  .candidate-inner, .preedit, .aux-up, .aux-down, .menu-item {
    min-height: 24px; /* compromise to üÄÑ's height */
    min-width: 16px;
    padding: 3px 7px; /* combine min-height, min-width and padding to make aux-up a square for Â∞è and A */
    background-clip: padding-box;
  }

  .menu-item:hover {
    color: white;
  }

  /* Use a dedicated div because
   * 1. divider color is not overlaid by panel color
   * 2. divider may not be full-length
   */
  .hoverables.vertical .divider {
    height: 1px;

    .divider-middle {
      width: 100%;
    }
  }

  .hoverables.horizontal .divider {
    width: 0;

    &.divider-paging {
      width: 1px;
    }

    .divider-middle {
      height: 100%;
    }
  }

  .label, .comment {
    font-size: 12px;
  }
}

.macos.light {
  .panel, .contextmenu {
    border-color: $panel-border-color-light;
  }

  .cursor.no-text {
    background-color: $text-color-light;
  }

  /* stylelint-disable-next-line no-descending-specificity */
  .candidate, .header, .contextmenu {
    background-color: $panel-color-light;
  }

  .contextmenu {
    color: black;
  }

  .text, .header {
    color: $text-color-light;
  }

  .label, .comment {
    color: $label-color-light;
  }

  .paging {
    color: gray; // disabled
    background-color: $panel-color-light;

    .hoverable-inner {
      color: $text-color-light; // enabled
    }
  }

  &.blue {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $light-blue;
    }
  }

  &.purple {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $light-purple;
    }
  }

  &.pink {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $light-pink;
    }
  }

  &.red {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $light-red;
    }
  }

  &.orange {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $light-orange;
    }
  }

  &.yellow {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $light-yellow;
    }
  }

  &.green {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $light-green;
    }
  }

  &.graphite {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $light-graphite;
    }
  }

  .hoverables .divider {
    .divider-side {
      background-color: $panel-color-light;
    }

    .divider-middle {
      background-color: $vertical-border-color-light;
    }
  }
}

.macos.dark {
  .panel, .contextmenu {
    border-color: $panel-border-color-dark;
  }

  .cursor.no-text {
    background-color: $text-color-dark;
  }

  /* stylelint-disable-next-line no-descending-specificity */
  .candidate, .header, .contextmenu {
    background-color: $panel-color-dark;
  }

  .contextmenu {
    color: white;
  }

  .text, .header {
    color: $text-color-dark;
  }

  .label, .comment {
    color: $label-color-dark;
  }

  .paging {
    color: gray; // disabled
    background-color: $panel-color-dark;

    /* stylelint-disable-next-line no-descending-specificity */
    .hoverable-inner {
      color: $text-color-dark; // enabled
    }
  }

  &.blue {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $dark-blue;
    }
  }

  &.purple {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $dark-purple;
    }
  }

  &.pink {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $dark-pink;
    }
  }

  &.red {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $dark-red;
    }
  }

  &.orange {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $dark-orange;
    }
  }

  &.yellow {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $dark-yellow;
    }
  }

  &.green {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $dark-green;
    }
  }

  &.graphite {
    .hoverable.highlighted .hoverable-inner, .menu-item:hover {
      background-color: $dark-graphite;
    }
  }

  .hoverables .divider {
    .divider-side {
      background-color: $panel-color-dark;
    }

    .divider-middle {
      background-color: $vertical-border-color-dark;
    }
  }
}

.macos.light, .macos.dark {
  .highlighted {
    .text, .label, .comment {
      color: white;
    }
  }
}
